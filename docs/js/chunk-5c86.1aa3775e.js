(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c86"],{"14b2":function(t,o,a){"use strict";a.d(o,"a",function(){return r}),a.d(o,"b",function(){return n});var e=a("bf48"),i=a.n(e),r=i.a.Object.extend("Categoria"),n=i.a.Object.extend("Produto")},"20d6":function(t,o,a){"use strict";var e=a("5ca1"),i=a("0a49")(6),r="findIndex",n=!0;r in[]&&Array(1)[r](function(){n=!1}),e(e.P+e.F*n,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(r)},2927:function(t,o,a){"use strict";var e=a("a54c"),i=a.n(e);i.a},"29d9":function(t,o,a){"use strict";a.r(o);var e=function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("div",[a("div",{staticClass:"row"},[t._v("Registros: "+t._s(t.registros))]),t.modoLista?a("div",{staticClass:"row flex flex-justify-center"},[a("h-table",{attrs:{title:"Produtos",columns:t.tableColumns,rows:t.registros,lineheight:"40px"},on:{onEditRow:t.editar},scopedSlots:t._u([{key:"ativo",fn:function(o){return[o.rowData.ativo?a("h-fa-icon",{attrs:{textcolor:"text-secondary",icon:["fas","check-circle"]},on:{click:function(a){t.trocarAtivo(o.rowData,!1)}}}):a("h-fa-icon",{attrs:{icon:["fas","ban"],textcolor:"text-negative"},on:{click:function(a){t.trocarAtivo(o.rowData,!0)}}})]}},{key:"Ação",fn:function(o){return[a("h-fa-icon",{attrs:{icon:["fas","edit"]},on:{click:function(a){t.editar(o.rowData)}}}),a("h-fa-icon",{staticClass:"h-pl-sm",attrs:{icon:["fas","trash-alt"]},on:{click:function(a){t.excluir(o.rowData)}}})]}}])})],1):a("div",{staticClass:"form flex flex-justify-center"},[a("div",{staticClass:"row flex flex-column"},[a("h-input",{attrs:{"float-label":"Codigo"},model:{value:t.form.codigo,callback:function(o){t.$set(t.form,"codigo","string"===typeof o?o.trim():o)},expression:"form.codigo"}}),a("h-input",{attrs:{"float-label":"Nome"},model:{value:t.form.nome,callback:function(o){t.$set(t.form,"nome","string"===typeof o?o.trim():o)},expression:"form.nome"}}),a("h-input",{attrs:{"float-label":"Valor"},model:{value:t.form.valor,callback:function(o){t.$set(t.form,"valor",o)},expression:"form.valor"}}),a("h-select",{attrs:{options:t.categorias,"float-label":"Cardapio"},model:{value:t.form.categoriaId,callback:function(o){t.$set(t.form,"categoriaId",o)},expression:"form.categoriaId"}}),a("h-checkbox",{attrs:{label:"Ativo"},model:{value:t.form.ativo,callback:function(o){t.$set(t.form,"ativo",o)},expression:"form.ativo"}})],1),a("div",{staticClass:"row h-pt-md flex flex-justify-center"},[a("h-btn",{attrs:{contained:"",label:"Criar"},on:{click:t.salvar}}),a("h-btn",{staticClass:"h-pl-md",attrs:{contained:"",label:"Cancelar"},on:{click:t.cancelar}})],1)]),t.modoLista?a("h-btn-float",{staticClass:"bottom-right-fixed",staticStyle:{right:"18px",bottom:"18px"},attrs:{minifloat:"",icon:["fas","plus"],bgcolor:"bg-primary","text-color":"text-white"},on:{click:t.novo}}):t._e()],1)},i=[],r=(a("c5f6"),a("20d6"),a("7514"),a("cadf"),a("551c"),a("14b2")),n=a("42d1"),c=a("47d3"),s=a("4cf1"),l=a("5588"),f=a("379a"),d=a("f160"),m={components:{HInput:n["a"],HSelect:c["a"],HCheckbox:s["a"],HTable:l["a"],HBtnFloat:f["a"],HBtn:d["a"]},data:function(){return{form:{objectId:void 0,codigo:"",nome:"",categoriaId:void 0,valor:0,ativo:!1},tableColumns:[{name:"codigo"},{name:"nome"},{name:"valor"},{name:"ativo"},{name:"Ação",alignment:"center"}],registros:[],categorias:[],modoLista:!0}},created:function(){this.listarCategorias(),this.listarProdutos()},methods:{novo:function(){this.limparForm(),this.modoLista=!1},cancelar:function(){this.modoLista=!0,this.limparForm()},limparForm:function(){this.form.objectId=void 0,this.form.codigo="",this.form.nome="",this.form.categoriaId=void 0,this.form.valor=0,this.form.ativo=!1},listarProdutos:function(){var t=this,o=this.$parse,a=new o.Query(r["b"]);a.ascending("nome"),a.find().then(function(o){t.registros=o.map(function(t){var o=t.toJSON();return o.categoriaNome=o.categoria.nome,o.categoriaId=o.categoria.objectId,o})})},listarCategorias:function(){var t=this,o=this.$parse,a=new o.Query(r["a"]);a.ascending("nome"),a.find().then(function(o){for(var a=0;a<o.length;a++){var e=o[a],i={label:"",value:""};i.label=e.get("nome"),i.value=e.id,t.categorias.push(i)}}).catch(function(t){console.log("Error: "+t.code+" "+t.message)})},editar:function(t){this.form.objectId=t.objectId,this.form.codigo=t.codigo,this.form.nome=t.nome,this.form.valor=parseFloat(t.valor).toFixed(2),this.form.categoriaId=t.categoria.objectId,this.form.ativo=t.ativo||!1,this.modoLista=!1},excluir:function(t){var o=this,a=r["b"].createWithoutData(t.objectId);a.fetch().then(function(t){return t.destroy()}).then(function(){o.listarProdutos()}).catch(function(t){console.log(t.message)})},trocarAtivo:function(t,o){var a=this,e=r["b"].createWithoutData(t.objectId);e.set("ativo",Boolean(o)),e.save().then(function(){var e=a.registros.findIndex(function(o){return o.objectId===t.objectId});a.registros[e].ativo=Boolean(o)}).catch(function(t){alert(t.message)})},salvar:function(){var t=this,o=t.form.objectId?r["b"].createWithoutData(t.form.objectId):new r["b"],a=r["a"].createWithoutData(t.form.categoriaId);o.set("codigo",t.form.codigo),o.set("nome",t.form.nome),o.set("valor",Number(t.form.valor)),o.set("categoria",a),o.set("ativo",t.form.ativo),o.save().then(function(o){t.listarProdutos(),t.limparForm(),t.modoLista=!0}).catch(function(t){console.log("Error: "+t.code+" "+t.message)})}}},u=m,h=(a("2927"),a("2877")),v=Object(h["a"])(u,e,i,!1,null,"69f44ba8",null);o["default"]=v.exports},a54c:function(t,o,a){}}]);
//# sourceMappingURL=chunk-5c86.1aa3775e.js.map